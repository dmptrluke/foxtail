{% extends "base.html" %}
{% load icon cache %}

{% block extra_head %}
    <meta name="twitter:card" content="summary"/>
    <meta property="og:url" content="{{ SITE_URL }}{{ post.get_absolute_url }}">
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="{{ post.title }}">
    <meta name="description" content="{{ post.text_rendered | striptags | truncatechars:200 }}">
    <meta property="og:description"
          content="{{ post.text_rendered | striptags | truncatechars:200 }}">
    <meta property="article:published_time" content="{{ post.created | date:"c" }}">
    <meta property="article:modified_time" content="{{ post.modified | date:"c" }}">
    {% if post.image %}
        <meta property="og:image" content="{{ SITE_URL }}{{ post.image.url }}">
    {% endif %}
{% endblock %}

{% block title %}{{ post.title }} - Blog{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-lg-8">
            <article class="blog-post mb-5">
                {% if post.image %}
                    <img class="img-fluid mb-3"
                         srcset="{{ post.image.crop.800x350 }} 1x, {{ post.image.crop.1200x525 }} 2x"
                         src="{{ post.image.crop.800x350 }}"
                         alt="">
                {% endif %}
                <h2><a class="text-reset" href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
                <p class="text-muted">{{ post.created | date:"F jS, Y" }}</p>
                <p class="rendered-markdown">{{ post.text_rendered | safe }}</p>

                <div class="row">
                    <div class="col-sm-12 text-right">
                        {% for tag in post.tags.all %}
                            {% if forloop.first %}in{% endif %}
                            <a href="{% url 'blog_list' %}?tag={{ tag.slug }}">{{ tag.name | capfirst }}</a>{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </article>
            {% if post.allow_comments and comments_enabled %}
                {% include "blog/comments.html" %}
            {% endif %}

        </div>


        <div class="col-lg-4">
            <hr class="d-sm-block d-lg-none my-5">
            {% include "blog/sidebar.html" %}
        </div>
    </div>
{% endblock content %}